---

- name: Add Apache virtualhosts.
  ansible.builtin.template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    owner: root
    group: root
    mode: 0644
  with_items:
    - {src: 'ntp.j2', dest: '/etc/apache2/sites-available/ntp'}

- name: Copy deekayen files.
  ansible.builtin.copy:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    owner: root
    group: root
    mode: 0644
  with_items:
    - {src: 'deekayen/error.html', dest: '/var/www/html/error.html'}
    - {src: 'deekayen/index.html', dest: '/var/www/html/index.html'}
    - {src: 'deekayen/key.asc', dest: '/var/www/html/key.asc'}
    - {src: 'deekayen/rss.xml', dest: '/var/www/html/rss.xml'}
    - {src: 'deekayen/sitemap.xml', dest: '/var/www/html/sitemap.xml'}
    - {src: 'deekayen/sitemap.xml.gz', dest: '/var/www/html/sitemap.xml.gz'}

- name: Create deekayen CSS directory.
  ansible.builtin.file:
    path: /var/www/html/css
    state: directory
    mode: 0755

- name: Copy deekayen CSS files.
  ansible.builtin.copy:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    owner: root
    group: root
    mode: 0644
  with_items:
    - {src: 'deekayen/screen.css', dest: '/var/www/html/css/screen.css'}
    - {src: 'deekayen/grid.css', dest: '/var/www/html/css/grid.css'}
